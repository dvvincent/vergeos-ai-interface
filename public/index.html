<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VergeOS AI Assistant</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <h1>ğŸ¤– VergeOS AI Assistant</h1>
                <div class="model-selector">
                    <select id="modelSelect" onchange="onModelChange()">
                        <option value="Gemma-3">Loading models...</option>
                    </select>
                </div>
            </div>
            <div class="header-right">
                <div class="status" id="status">
                    <span class="status-dot"></span>
                    <span>Connected</span>
                </div>
                <button class="theme-toggle" onclick="toggleTheme()" title="Toggle dark/light mode" id="themeToggle">
                    ğŸŒ™
                </button>
                <button class="clear-btn" onclick="clearChat()" title="Clear conversation">
                    ğŸ—‘ï¸ Clear
                </button>
            </div>
        </div>

        <!-- Chat Container -->
        <div class="chat-container" id="chatContainer">
            <!-- Welcome message -->
            <div class="welcome-message">
                <div class="welcome-icon">ğŸš€</div>
                <h2>Welcome to VergeOS AI Assistant</h2>
                <p>I'm powered by <strong>qwen3-coder-14B</strong> running on your VergeOS instance.</p>
                <p>Ask me anything about coding, infrastructure, or general questions!</p>
                
                <div class="quick-actions">
                    <button onclick="sendQuickMessage('Explain what VergeOS is')">What is VergeOS?</button>
                    <button onclick="sendQuickMessage('Write a Python script to list files')">Python Script</button>
                    <button onclick="sendQuickMessage('Explain Kubernetes pods')">Kubernetes Help</button>
                    <button onclick="sendQuickMessage('Write a bash script for backups')">Bash Script</button>
                </div>
            </div>
        </div>

        <!-- Typing Indicator -->
        <div class="typing-indicator" id="typingIndicator">
            <div class="typing-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <span class="typing-text">AI is thinking...</span>
        </div>

        <!-- Input Container -->
        <div class="input-container">
            <div class="input-wrapper">
                <input type="file" id="fileInput" accept=".txt,.md,.json,.csv,.log,.xml,.yaml,.yml,.js,.py,.html,.css,.sh,.sql" style="display: none;" onchange="handleFileSelect(event)">
                <button class="attach-btn" onclick="document.getElementById('fileInput').click()" title="Attach a text file">
                    ğŸ“
                </button>
                <textarea 
                    id="messageInput" 
                    placeholder="Ask me anything..." 
                    rows="1"
                    onkeydown="handleKeyPress(event)"
                ></textarea>
                <button id="sendBtn" onclick="sendMessage()">
                    <span class="send-icon">â¤</span>
                    Send
                </button>
                <button id="stopBtn" onclick="stopRequest()" style="display: none;">
                    <span class="send-icon">â¹</span>
                    Stop
                </button>
            </div>
            <div class="input-footer">
                <label class="streaming-toggle">
                    <input type="checkbox" id="streamingToggle" checked>
                    <span>Enable streaming responses</span>
                </label>
                <span class="char-count" id="charCount">0 characters</span>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
